{% extends "layout.html" %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/chart.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}
{% block content %}

<div class="container-fluid mt-4">
    <div class="dex-layout">

        <div class="chart-panel">
            <div class="chart-header">
                <div class="token-info">
                    <div class="token-logos">
                        <img src="https://s2.coinmarketcap.com/static/img/coins/64x64/1.png" alt="{{ tokenA }} logo" class="token-logo-a">
                        <img src="https://s2.coinmarketcap.com/static/img/coins/64x64/825.png" alt="{{ tokenB }} logo" class="token-logo-b">
                    </div>
                    <div>
                        <h2 class="pair-name">{{ tokenA }}/{{ tokenB }}</h2>
                        <a href="{{ url_for('main.watchlist') }}" class="back-link">&larr; Quay lại Watchlist</a>
                    </div>
                </div>

                <div class="market-stats">
                    <div class="stat">
                        <div class="stat-label">Giá cuối</div>
                        <div class="stat-value" id="price-display">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Thay đổi 24h</div>
                        <div class="stat-value" id="price-change-24h">+0.00 (0.00%)</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Cao 24h</div>
                        <div class="stat-value" id="high-24h">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Thấp 24h</div>
                        <div class="stat-value" id="low-24h">$0.00</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">KLGD 24h ({{ tokenA }})</div>
                        <div class="stat-value" id="volume-24h-token">0.00</div>
                    </div>
                     <div class="stat">
                        <div class="stat-label">KLGD 24h ({{ tokenB }})</div>
                        <div class="stat-value" id="volume-24h-quote">$0</div>
                    </div>
                </div>
                 <div class="theme-switcher">
                    <input type="checkbox" id="themeSwitch" class="theme-switch-checkbox">
                    <label for="themeSwitch" class="theme-switch-label">
                        <i class="fas fa-moon moon-icon"></i>
                        <i class="fas fa-sun sun-icon"></i>
                        <span class="theme-switch-ball"></span>
                    </label>
                </div>
            </div>

            <div id="tradingview_chart_container" class="tradingview-container">
                </div>
        </div>

        <div class="trade-panel">
            <h3>Swap Tokens (Comming soon...)</h3>
            <div class="swap-input-group">
                <div class="label-row">
                    <span>Bạn trả</span>
                    <span>Số dư: 0.00</span>
                </div>
                <div class="input-row">
                    <input type="number" class="swap-input" placeholder="0.0">
                    <button class="token-select-btn">
                        <img src="https://s2.coinmarketcap.com/static/img/coins/64x64/1.png" alt="{{ tokenA }} logo">
                        <span>{{ tokenA }}</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>

            <div class="swap-separator">
                <button class="swap-separator-btn"><i class="fas fa-arrow-down"></i></button>
            </div>

            <div class="swap-input-group">
                <div class="label-row">
                    <span>Bạn nhận (ước tính)</span>
                </div>
                <div class="input-row">
                    <input type="number" class="swap-input" placeholder="0.0" disabled>
                     <button class="token-select-btn">
                        <img src="https://s2.coinmarketcap.com/static/img/coins/64x64/825.png" alt="{{ tokenB }} logo">
                        <span>{{ tokenB }}</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>

            <button class="connect-wallet-btn">
                Kết nối Ví 
            </button>
        </div>

    </div>
</div>

<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script type="text/javascript">
    // Truyền biến từ Flask sang JavaScript
    const tokenA = "{{ tokenA }}";
    const tokenB = "{{ tokenB }}";
</script>
<script src="{{ url_for('static', filename='js/chart.js') }}"></script>
{% endblock %}